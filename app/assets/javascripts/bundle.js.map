{"version":3,"sources":["webpack:///webpack/bootstrap de72b1609305f6698a44","webpack:///./lib/ratter.js","webpack:///./lib/truck.js","webpack:///./lib/shuffle.js","webpack:///./lib/pedestrian.js"],"names":["document","addEventListener","init","addTrucksandCabs","require","addPedestrians","stage","width","height","loader","rat","background","cab","gameover","score","alive","truckCount","pedestrianCount","firstChildren","handleComplete","createjs","Shape","graphics","beginBitmapFill","getResult","drawRect","RatSpriteSheet","SpriteSheet","framerate","frames","speed","Sprite","x","y","addChild","window","scurry","Ticker","timingMode","RAF","tick","gameOverText","alpha","event","preventDefault","key","gotoAndPlay","update","movePedestrians","moveTrucks","i","getNumChildren","pedestrian","getChildAt","checkRatCollision","pathBlocked","stepAside","vel","direction","choosePedestrianAnimation","currentAnimation","chooseAnimation","Math","abs","prefersUp","blocked","obstical","offset","pedestrianLeft","pedestrianRight","pedestrianTop","pedestrianBottom","obsticalLeft","obsticalRight","obsticalTop","obsticalBottom","truck","velX","adjustment","ratLeft","ratRight","ratTop","ratBottom","canvas","getElementById","Stage","manifest","src","id","LoadQueue","loadManifest","shuffle","positions","truckPositions","push","truckPos","pop","truckImage","randomVehicle","regX","scaleX","randomLane","coinToss","randomX","floor","random","addTruck","module","exports","arr","j","length","PedestrianSpriteSheet","first","_initializePedestrians","_addNewPedestrians","pos","multiplier","xPos","yPos"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap de72b1609305f6698a44","document.addEventListener('DOMContentLoaded', init);\nconst addTrucksandCabs = require(\"./truck.js\");\nconst addPedestrians = require(\"./pedestrian.js\");\n\nlet stage, width, height, loader;\nlet rat, background, cab, gameover;\nlet score, alive;\nlet truckCount, pedestrianCount, firstChildren;\n\nconst handleComplete = () => {\n  // rat = new createjs.Shape();\n  // rat.graphics.beginBitmapFill(loader.getResult(\"rat\")).drawRect(0, 0, 60, 60);\n  width = 780;\n  height = 600;\n  background = new createjs.Shape();\n  background.graphics.beginBitmapFill(loader.\n    getResult(\"background\")).\n    drawRect(0, 0, width, height);\n\n  // road.y = 260;\n\n\n  const RatSpriteSheet = new createjs.SpriteSheet({\n    framerate: 20,\n    \"images\": [loader.getResult(\"rat\")],\n    \"frames\": {\"regX\": 0, \"height\": 60, \"count\": 16, \"regY\": 0, \"width\": 60},\n    \"animations\": {\n      \"down\": [0, 3, \"standdown\"],\n      \"left\": [4, 7, \"standup\"],\n      \"up\": [8, 11, \"standup\"],\n      \"right\": [12, 15, \"standup\"],\n      \"standup\": {frames: [8, 11], speed: 0.2},\n      \"standdown\": {frames: [0, 3], speed: 0.2},\n    }\n  });\n\n  rat = new createjs.Sprite(RatSpriteSheet, \"up\");\n  rat.x = 300;\n  rat.y = 540;\n\n  stage.addChild(background, rat);\n  firstChildren = 2;\n  addTrucksandCabs(stage, loader, truckCount);\n  addPedestrians(stage, loader, pedestrianCount);\n  // gameOverText(loader);\n\n  window.addEventListener(\"keydown\", scurry);\n\n  createjs.Ticker.timingMode = createjs.Ticker.RAF;\n  createjs.Ticker.addEventListener(\"tick\", tick);\n\n};\n\nfunction gameOverText(loader) {\n  gameover = new createjs.Shape();\n  gameover.graphics.beginBitmapFill(loader.\n    getResult(\"gameover\")).\n    drawRect(0, 0, 200, 120);\n    gameover.x = 350;\n    gameover.y = 250;\n    gameover.alpha = 0;\n    stage.addChild(gameover);\n\n}\n\nfunction scurry() {\n  event.preventDefault();\n  switch (event.key) {\n  case \"ArrowUp\":\n    rat.gotoAndPlay(\"up\");\n    if(rat.y > 0) rat.y -= 60;\n    score += 20;\n    return;\n  case \"ArrowRight\":\n    rat.gotoAndPlay(\"right\");\n    if(rat.x < width - 60) rat.x += 60;\n    score -= 2;\n    return;\n  case \"ArrowDown\":\n    rat.gotoAndPlay(\"down\");\n    if(rat.y < height - 60) rat.y += 60;\n    score -= 5;\n    return;\n  case \"ArrowLeft\":\n    rat.gotoAndPlay(\"left\");\n    if(rat.x >= 60) rat.x -= 60;\n    score -= 2;\n    return;\n  case \"Enter\":\n    if (pedestrianCount < 30){\n      addPedestrians(stage, loader, pedestrianCount, false);\n      pedestrianCount += 4;\n    }\n    return;\n  }\n}\n\n\nfunction tick(event) {\n  if (alive) {\n    stage.update(event);\n    movePedestrians();\n    moveTrucks();\n  }\n}\n\nfunction movePedestrians() {\n  for (let i = truckCount + firstChildren; i < stage.getNumChildren(); ++i){\n    let pedestrian = stage.getChildAt(i);\n    checkRatCollision(pedestrian);\n    if (pathBlocked(pedestrian)) {\n      stepAside(pedestrian);\n    } else {\n      pedestrian.x += pedestrian.vel;\n      if (pedestrian.vel > 0) {\n        pedestrian.direction = \"right\";\n      } else {\n        pedestrian.direction = \"left\";\n      }\n    }\n    choosePedestrianAnimation(pedestrian);\n    if (pedestrian.x < -30) {\n      pedestrian.x = 810;\n    } else if (pedestrian.x > 810) {\n      pedestrian.x = -30;\n    }\n  }\n}\n\nfunction choosePedestrianAnimation(pedestrian) {\n  if (pedestrian.currentAnimation !== pedestrian.direction) {\n    pedestrian.gotoAndPlay(pedestrian.direction);\n  }\n}\n\nfunction chooseAnimation(pedestrian) {\n  if (pedestrian.vel > 0 && pedestrian.currentAnimation !== \"right\") {\n    pedestrian.gotoAndPlay(\"right\");\n  } else if (pedestrian.vel < 0 &&\n    pedestrian.currentAnimation !== \"left\") {\n    pedestrian.gotoAndPlay(\"left\");\n  }\n}\n\nfunction stepAside(pedestrian) {\n  if (pedestrian.y >= 280) {\n    pedestrian.direction = \"up\";\n    pedestrian.y -= Math.abs(pedestrian.vel);\n    pedestrian.prefersUp = true;\n  } else if (pedestrian.y <= 100) {\n    pedestrian.direction = \"down\";\n    pedestrian.y += Math.abs(pedestrian.vel);\n    pedestrian.prefersUp = false;\n  } else {\n    if (pedestrian.prefersUp){\n      pedestrian.direction = \"up\";\n      pedestrian.y -= Math.abs(pedestrian.vel);\n    } else {\n      pedestrian.direction = \"down\";\n      pedestrian.y += Math.abs(pedestrian.vel);\n    }\n  }\n}\n\nfunction pathBlocked(pedestrian){\n  let blocked = false;\n  for (let i = truckCount + firstChildren;\n     i < truckCount + pedestrianCount + firstChildren;\n      ++i){\n    let obstical = stage.getChildAt(i);\n    const offset = (pedestrian.vel > 0) ? 30 : -30;\n    const pedestrianLeft = pedestrian.x + offset;\n    const pedestrianRight = pedestrian.x + 27 + offset;\n    const pedestrianTop = pedestrian.y;\n    const pedestrianBottom = pedestrian.y + 27;\n    const obsticalLeft = obstical.x;\n    const obsticalRight = obstical.x + 27;\n    const obsticalTop = obstical.y;\n    const obsticalBottom = obstical.y + 27;\n    if (pedestrianLeft < obsticalRight &&\n        pedestrianRight > obsticalLeft &&\n        pedestrianTop < obsticalBottom &&\n        pedestrianBottom > obsticalTop &&\n        pedestrian.vel > obstical.vel){\n        blocked = true;\n    }\n  }\n  return blocked;\n}\n\nfunction moveTrucks() {\n  for (let i = 2; i < truckCount + firstChildren; ++i) {\n\t\tlet truck = stage.getChildAt(i);\n\t\ttruck.x = (truck.x + truck.velX);\n    const adjustment = (truck.vel < 0 ? truck.width : 0);\n    (checkRatCollision(truck, adjustment));\n    if (truck.x > 880 ) truck.x = -100;\n    if (truck.x < -100) truck.x = 880;\n\t}\n}\n\nfunction checkRatCollision(obstical, adjustment = 0) {\n  const ratLeft = rat.x + 15;\n  const ratRight = rat.x + 45;\n  const ratTop = rat.y;\n  const ratBottom = rat.y + 60;\n  const obsticalLeft = obstical.x - adjustment;\n  const obsticalRight = obstical.x + obstical.width - adjustment;\n  const obsticalTop = obstical.y;\n  const obsticalBottom = obstical.y + obstical.height;\n  if (ratLeft < obsticalRight && ratRight > obsticalLeft &&\n      ratTop < obsticalBottom && ratBottom > obsticalTop){\n    alive = false;\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction init() {\n  const canvas = document.getElementById(\"ratterCanvas\");\n  stage = new createjs.Stage(canvas);\n  score = 0;\n  alive = true;\n  truckCount = 15;\n  pedestrianCount = 15;\n\n  width = stage.canvas.width;\n  height = stage.canvas.height;\n\n  const manifest = [ {src: \"rat.png\", id: \"rat\"},\n    {src: \"background.png\", id: \"background\"},\n    {src: \"truck.png\", id: \"truck\"},\n    {src: \"gameover.png\", id: \"gameover\"},\n    {src: \"cab.png\", id: \"cab\"},\n    {src: \"pedestrian.png\", id: \"pedestrian\"}\n  ];\n\n  loader = new createjs.LoadQueue(false);\n  loader.addEventListener(\"complete\", handleComplete);\n  loader.loadManifest(manifest, true, \"./app/assets/images/\");\n\n\n  stage.update();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/ratter.js","const shuffle = require(\"./shuffle.js\");\n\nfunction addTrucksandCabs(stage, loader, truckCount) {\n  let truck;\n  let positions = [];\n\n  let truckPositions = [];\n\n  for (let i = 0; i < 8; ++i) {\n    truckPositions.push([i*110, 310]);\n    truckPositions.push([i*110, 370]);\n    truckPositions.push([i*110, 436]);\n    truckPositions.push([i*110, 496]);\n  }\n\n  shuffle(truckPositions);\n\n  for (let i = 0; i < truckCount; ++i) {\n    const truckPos = truckPositions.pop();\n    const truckImage = randomVehicle(loader);\n    truck = new createjs.Shape();\n    truck.width = truckImage.width;\n    truck.height = truckImage.height;\n    truck.graphics.beginBitmapFill(truckImage).\n      drawRect(0, 0, truck.width, truck.height);\n\n    truck.x = truckPos[0];\n    truck.y = truckPos[1];\n    if (truck.y < 400) {\n      truck.velX = -2;\n    } else {\n      truck.regX = truckImage.width;\n      truck.scaleX = -1;\n      truck.velX = 2;\n    }\n    stage.addChild(truck);\n  }\n}\n\n\n/////\nfunction randomLane(truck){\n  return coinToss() === 0 ? truck.y : truck.y + 60;\n}\n\nfunction randomX(){\n  return Math.floor(Math.random() * 8) * 100;\n\n}\n\nfunction randomVehicle(loader) {\n  return (coinToss() === 0) ?\n    loader.getResult(\"cab\") :\n    loader.getResult(\"truck\"); //TODO make truck\n}\n\nfunction coinToss() {\n  return Math.floor(Math.random() * 2);\n}\n\nfunction addTruck(stage, loader) {\n  let truck;\n\n  const truckImage = randomVehicle(loader);\n  truck = new createjs.Shape();\n  truck.width = truckImage.width;\n  truck.height = truckImage.height;\n  truck.graphics.beginBitmapFill(truckImage).\n  drawRect(0, 0, truck.width, truck.height);\n}\n\nmodule.exports = addTrucksandCabs;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/truck.js","function shuffle(arr) {\n    let j, x, i;\n    for (i = arr.length; i; i--) {\n        j = Math.floor(Math.random() * i);\n        x = arr[i - 1];\n        arr[i - 1] = arr[j];\n        arr[j] = x;\n    }\n}\n\nmodule.exports = shuffle;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/shuffle.js","const shuffle = require(\"./shuffle.js\");\n\nlet PedestrianSpriteSheet;\nconst positions = [];\nlet pedestrian;\n\nfunction addPedestrians(stage, loader, pedestrianCount, first = true) {\n  PedestrianSpriteSheet = new createjs.SpriteSheet({\n    framerate: 20,\n    \"images\": [loader.getResult(\"pedestrian\")],\n    \"frames\": {\"regX\": 0,\n    \"height\": 27,\n    \"count\": 32,\n    \"regY\": 0,\n    \"width\": 27},\n    \"animations\": {\n      \"left\": [0, 7, \"left\"],\n      \"right\": [8, 15],\n      \"down\": [16, 23],\n      \"up\": [24, 31]\n    }\n  });\n\n  if (first) {\n    _initializePedestrians(stage, loader, pedestrianCount);\n  } else {\n    _addNewPedestrians(stage, loader, pedestrianCount);\n  }\n}\n\nfunction _addNewPedestrians(stage, loader, pedestrianCount){\n  for (let i = 0; i < 4; ++i){\n    pedestrian = new createjs.Sprite(PedestrianSpriteSheet, \"right\");\n    const pos = positions.pop();\n    stage.addChild(pedestrian);\n    pedestrian.x = pos[0];\n    pedestrian.y = pos[1];\n    pedestrian.regX = 13;\n    pedestrian.width = 10;\n    pedestrian.height = 10;\n    pedestrian.vel = Math.floor(Math.random() * 3) + 1;\n    let multiplier = Math.floor(Math.random() *2);\n    if (multiplier === 0) multiplier = -1;\n    pedestrian.prefersUp = (Math.floor(Math.random() *2) === 0);\n    pedestrian.vel *= multiplier;\n  }\n}\n\nfunction _initializePedestrians(stage, loader, pedestrianCount){\n  for (let xPos = 0; xPos <= 780; xPos += 30){\n    for(let yPos = 100; yPos < 280; yPos +=30 ){\n      positions.push([xPos, yPos]);\n    }\n  }\n\n  shuffle(positions);\n\n  for (let i = 0; i < pedestrianCount; ++i){\n    pedestrian = new createjs.Sprite(PedestrianSpriteSheet, \"right\");\n    const pos = positions.pop();\n    stage.addChild(pedestrian);\n    pedestrian.x = pos[0];\n    pedestrian.y = pos[1];\n    pedestrian.regX = 13;\n    pedestrian.width = 10;\n    pedestrian.height = 10;\n    pedestrian.vel = Math.floor(Math.random() * 3) + 1;\n    let multiplier = Math.floor(Math.random() *2);\n    if (multiplier === 0) multiplier = -1;\n    pedestrian.prefersUp = (Math.floor(Math.random() *2) === 0);\n    pedestrian.vel *= multiplier;\n  }\n}\n\nmodule.exports = addPedestrians;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/pedestrian.js"],"sourceRoot":""}